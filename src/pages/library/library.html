<!--
  dùng libIndex để hiển thị
-->
<ion-content>
  <div class="header">
    <div *ngIf="controller === 1">
      <ion-icon name="arrow-round-back" (click)="gotoPost()"></ion-icon>      
      <ion-icon *ngIf="service.multi === false" name="ios-done-all" (click)="changeAvatar()"></ion-icon>
      <ion-icon *ngIf="service.multi === true" name="ios-done-all" (click)="selectImages()"></ion-icon>
    </div>

    <div *ngIf="controller === 2">
      <ion-icon name="arrow-round-back" (click)="returnBack()"></ion-icon>
      <label for="file">
        <ion-icon name="cloud-upload"></ion-icon>
        <span aria-hidden="true"></span>
        <input type="file" id="file" style="display:none" (change)="getFile()" multiple />
      </label>
      <ion-icon *ngIf="files !== undefined" name="cloud-done" (click)="uploadImage()"></ion-icon>      
      <ion-icon name="add-circle" (click)="newLibrary()"></ion-icon>
    </div>

    <div *ngIf="controller === 3">
      <ion-icon name="arrow-round-back" (click)="goback()"></ion-icon>

      <label for="file">
        <ion-icon name="cloud-upload"></ion-icon>
        <span aria-hidden="true"></span>
        <input type="file" id="file" style="display:none" (change)="getFile()" multiple />
      </label>
      <ion-icon *ngIf="files !== undefined" name="cloud-done" (click)="uploadImage()"></ion-icon>

      <ion-icon *ngIf="isSelect === true" name="ios-checkbox-outline" (click)="selectOff()"></ion-icon>
      <ion-icon *ngIf="isSelect === false" name="ios-checkbox" (click)="selectOn()"></ion-icon>
      <ion-icon *ngIf="isSelect === true" name="ios-trash" (click)="delete()"></ion-icon>
      <ion-icon name="create" (click)="modifyLibrary()"></ion-icon>
      <ion-icon *ngIf="service.libraryIndex !== 0" name="remove-circle" (click)="deleteLibrary(user.userId, service.libraryIndex)"></ion-icon>
    </div>    
  </div>

  <div class="container">
    <div *ngIf="controller === 1">
      <span class="inline" *ngFor="let imageData of library.displayImage">
        <img class="md-icon" src="{{imageData.url}}" *ngIf="service.selecteImages.indexOf(imageData.url) < 0" (click)="tickImage(imageData)">
        <img class="md-icon selected" src="{{imageData.url}}" *ngIf="service.selecteImages.indexOf(imageData.url) >= 0" (click)="untickImage(imageData)">
      </span>
    </div>

    <ion-list *ngIf="controller === 2">
      <ion-item color="primary">
        Danh sách thư viện
      </ion-item>
      <ion-item *ngFor="let libraryList of library.list; let libraryIndex = index">
        <img class="md-icon" src="{{libraryList.last.url}}" (click)="gotoLibrary(libraryList.libraryId, libraryIndex)">
        <span class="desc">
          {{libraryList.name}}
        </span>
      </ion-item>
      <ion-item color="primary">
        Tất cả ảnh
      </ion-item>
      <div *ngFor="let imageData of library.displayImage">
        <img class="md-icon border inline" src="{{imageData.url}}" (click)="viewImage(imageData.url)">
      </div>
    </ion-list>

    <ion-list *ngIf="controller === 3">
      <ion-item color="primary">
        Thông tin thư thư viện
      </ion-item>
      <ion-item>
        Tên: {{selectedLibrary.name}}
      </ion-item>
      <ion-item>
        Giới thiệu: {{selectedLibrary.describe}}
      </ion-item>
      <ion-item>
        Ngày tạo: {{selectedLibrary.time | date: "yyyy/MM/dd HH:mm"}}   
      </ion-item>
      <ion-item color="primary">
        Danh sách ảnh
      </ion-item>
      <span class="inline" *ngFor="let imageData of library.displayLibraryImage; let imageIndex = index">
        <span *ngIf="isSelect === true">
          <img class="md-icon" src="{{imageData.url}}" *ngIf="selectImages.indexOf(imageData.id) < 0" (click)="tickImage(imageData.id)">
          <img class="md-icon selected" src="{{imageData.url}}" *ngIf="selectImages.indexOf(imageData.id) >= 0" (click)="untickImage(imageData.id)">    
        </span>
        <img class="md-icon" src="{{imageData.url}}" *ngIf="isSelect === false" (click)="viewImage(imageData.url)">
      </span>
    </ion-list>
  </div>
</ion-content>
